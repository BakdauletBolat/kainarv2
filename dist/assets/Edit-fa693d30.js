import{X,y as f,N as J,a3 as K,c as $,d as e,o as w,a as T,w as o,a6 as W,b as l,V as C,h as s,a4 as Y,t as v,a5 as Z,l as V,x as h,q as j,Q as N,A as P,e as B,E as ee,f as z,r as le,F as S,B as te,n as ae,G as oe}from"./index-5cc15e35.js";import{u as se}from"./useInvoiceStore-ebc5ab5b.js";import{B as F}from"./vue-datepicker-c08b9ce5.js";import{V as E,a as r}from"./VRow-31de0795.js";import{V as de}from"./VBreadcrumbs-bfc418b8.js";import{V as ne}from"./VChip-0b64cb0d.js";import{V as n}from"./VTextField-354b8d27.js";import{V as ie}from"./VDialog-a3f005aa.js";import{V as ue}from"./VForm-8adbab1a.js";/* empty css                   */import"./VCounter-5de066e9.js";import"./VField-3bcdd552.js";const re={class:"d-flex align-center gap-2"},me={class:"text-h6 font-weight-bold mb-0"},ce={class:"text-end"},pe={class:"text-h6 font-weight-bold mb-0"},fe={class:"d-flex align-center justify-space-between"},ve=s("span",{class:"font-weight-medium"}," INVOICE FROM ",-1),Ve={class:"d-flex align-center justify-space-between"},ye=s("span",{class:"font-weight-medium"}," INVOICE TO ",-1),_e=s("p",{class:"font-weight-medium"}," DATE CREATE ",-1),he=s("p",{class:"font-weight-medium"}," DUE DATE ",-1),be={class:"d-flex justify-space-between flex-wrap pb-2"},xe=s("h6",{class:"text-h6"}," Product Details ",-1),ge={class:"d-flex gap-4 flex-column flex-sm-row flex-wrap my-3"},we={class:"d-flex flex-grow-1 gap-4"},Ue={class:"d-flex gap-4"},ke={class:"text-end"},Ce={class:"d-flex justify-end mt-5"},Ne={style:{width:"12rem"}},De={class:"d-flex gap-3 mb-4"},Te={class:"d-flex justify-space-between"},Pe=s("span",{class:"font-weight-medium"},"Subtotal",-1),Ee={class:"d-flex justify-space-between"},qe=s("span",{class:"font-weight-medium"},"Discount",-1),Ae={class:"text-error"},Ie={class:"d-flex justify-space-between"},$e=s("span",{class:"font-weight-medium"},"Taxes",-1),je={class:"d-flex justify-space-between"},Be=s("span",{class:"font-weight-medium"},"Total",-1),ze=s("h6",{class:"text-h6 text-center"}," No invoice found! ",-1),Ye={__name:"Edit",setup(Se){const R=[{title:"Home",disabled:!1,to:{path:"/"}},{title:"Invoice",disabled:!0},{title:"Edit",disabled:!0}],L=se(),q=X(),d=f(),U=f(),A=()=>{const i=q.params.id;L.fetchInvoice(i).then(t=>{var m;d.value=t.data[0],U.value=(m=d.value)==null?void 0:m.dueDate})},O=i=>{var t;(t=d.value)==null||t.products.splice(i,1)};J(A),K(q,A,{immediate:!0});const I=$(()=>{var i,t;return(i=d.value)!=null&&i.products.length?(t=d.value)==null?void 0:t.products.reduce((m,y)=>m+y.price*y.quantity,0):0}),M={unpaid:"red",EMI:"orange",full:"green"},c=f(!1),p=f(!1),b=f(!1),k=i=>!!i||"Name is required",D=f(),u=f({name:"",description:"",price:0,quantity:0}),x=f(10),g=f(5),Q=$(()=>(i,t)=>i*t),G=()=>{var i;(i=D.value)==null||i.validate().then(t=>{var m,y;t.valid&&((m=d.value)==null||m.products.push({name:u.value.name,description:u.value.description,price:u.value.price,quantity:u.value.quantity}),b.value=!1,(y=D.value)==null||y.reset())})};return(i,t)=>{var m;return(m=e(d))!=null&&m.customerName.length?(w(),T(E,{key:0},{default:o(()=>{var y;return[l(r,{cols:"12"},{default:o(()=>[l(de,{items:R,divider:"-",class:"px-0"})]),_:1}),(y=e(d))!=null&&y.invoiceNumber?(w(),T(r,{key:0,cols:"12"},{default:o(()=>[l(B,{class:"invoice-edit-card"},{default:o(()=>[l(C,{class:"d-flex justify-space-between"},{default:o(()=>[s("div",re,[l(Y,{class:"text-primary"}),s("h6",me,v(e(Z).title.value),1)]),s("div",ce,[l(ne,{label:"",density:"compact",color:M[e(d).status],class:"text-capitalize mb-1"},{default:o(()=>[V(v(e(d).status),1)]),_:1},8,["color"]),s("h6",pe,v(e(d).invoiceNumber),1)])]),_:1}),l(C,null,{default:o(()=>[l(E,null,{default:o(()=>[l(r,{cols:"12",sm:"6"},{default:o(()=>[s("div",fe,[ve,l(h,{color:"primary",variant:"text",density:"compact",onClick:t[0]||(t[0]=a=>c.value=!e(c))},{default:o(()=>[V(v(e(c)?"save":"Change"),1)]),_:1})]),l(n,{modelValue:e(d).from.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e(d).from.name=a),variant:e(c)?"underlined":"plain",density:"compact",placeholder:"Name",readonly:!e(c),"hide-details":""},null,8,["modelValue","variant","readonly"]),l(n,{modelValue:e(d).from.address,"onUpdate:modelValue":t[2]||(t[2]=a=>e(d).from.address=a),variant:e(c)?"underlined":"plain",density:"compact",placeholder:"Address",readonly:!e(c),"hide-details":""},null,8,["modelValue","variant","readonly"]),l(n,{modelValue:e(d).from.phone,"onUpdate:modelValue":t[3]||(t[3]=a=>e(d).from.phone=a),variant:e(c)?"underlined":"plain","hide-details":"",placeholder:"Phone",readonly:!e(c),density:"compact"},{"prepend-inner":o(()=>[l(j,{size:"18",icon:"mdi-phone-outline",class:"mt-2"})]),_:1},8,["modelValue","variant","readonly"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[s("div",Ve,[ye,l(h,{color:"primary",variant:"text",density:"compact",onClick:t[4]||(t[4]=a=>p.value=!e(p))},{default:o(()=>[V(v(e(p)?"save":"Change"),1)]),_:1})]),l(n,{modelValue:e(d).to.name,"onUpdate:modelValue":t[5]||(t[5]=a=>e(d).to.name=a),variant:e(p)?"underlined":"plain",density:"compact",placeholder:"Name",readonly:!e(p),"hide-details":""},null,8,["modelValue","variant","readonly"]),l(n,{modelValue:e(d).to.address,"onUpdate:modelValue":t[6]||(t[6]=a=>e(d).to.address=a),variant:e(p)?"underlined":"plain",density:"compact",placeholder:"Address",readonly:!e(p),"hide-details":""},null,8,["modelValue","variant","readonly"]),l(n,{modelValue:e(d).to.phone,"onUpdate:modelValue":t[7]||(t[7]=a=>e(d).to.phone=a),variant:e(p)?"underlined":"plain",density:"compact",placeholder:"Phone",readonly:!e(p),"hide-details":""},{"prepend-inner":o(()=>[l(j,{size:"18",icon:"mdi-phone-outline",class:"mt-2"})]),_:1},8,["modelValue","variant","readonly"])]),_:1}),l(r,{cols:"6"},{default:o(()=>[_e,l(e(F),{"auto-apply":"",disabled:"",teleport:!0,"model-value":e(d).invoiceDate,"enable-time-picker":!1,style:{"max-width":"10rem"},dark:i.$vuetify.theme.current.dark},null,8,["model-value","dark"])]),_:1}),l(r,{cols:"6"},{default:o(()=>[he,l(e(F),{modelValue:e(U),"onUpdate:modelValue":t[8]||(t[8]=a=>N(U)?U.value=a:null),"auto-apply":"",teleport:!0,"enable-time-picker":!1,style:{"max-width":"10rem"},dark:i.$vuetify.theme.current.dark},null,8,["modelValue","dark"])]),_:1})]),_:1})]),_:1}),l(C,null,{default:o(()=>[s("div",be,[xe,l(h,{size:"small",color:"primary",variant:"text","prepend-icon":"mdi-plus",onClick:t[9]||(t[9]=a=>b.value=!e(b))},{default:o(()=>[V(" Add Product ")]),_:1})]),l(P),l(ie,{modelValue:e(b),"onUpdate:modelValue":t[15]||(t[15]=a=>N(b)?b.value=a:null),"max-width":"600"},{default:o(()=>[l(B,{title:"Add Product"},{default:o(()=>[l(C,null,{default:o(()=>[l(e(ue),{ref_key:"refAddNewProduct",ref:D},{default:o(()=>[l(E,null,{default:o(()=>[l(r,{cols:"12"},{default:o(()=>[l(n,{modelValue:e(u).name,"onUpdate:modelValue":t[10]||(t[10]=a=>e(u).name=a),label:"Title",rules:[k]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12"},{default:o(()=>[l(n,{modelValue:e(u).description,"onUpdate:modelValue":t[11]||(t[11]=a=>e(u).description=a),rules:[k],label:"Description"},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(n,{modelValue:e(u).quantity,"onUpdate:modelValue":t[12]||(t[12]=a=>e(u).quantity=a),label:"Quantity",rules:[k],type:"number"},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:o(()=>[l(n,{modelValue:e(u).price,"onUpdate:modelValue":t[13]||(t[13]=a=>e(u).price=a),label:"Price",rules:[k],type:"number"},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12"},{default:o(()=>[l(h,{variant:"tonal",color:"secondary",type:"reset",class:"me-4",onClick:t[14]||(t[14]=a=>b.value=!1)},{default:o(()=>[V(" Cancel ")]),_:1}),l(h,{variant:"tonal",color:"success",onClick:G},{default:o(()=>[V(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ee,{lines:"two"},{default:o(()=>[(w(!0),z(S,null,le(e(d).products,(a,H)=>(w(),z(S,{key:a.name},[l(oe,{class:"px-0"},{default:o(()=>[s("div",ge,[s("div",we,[l(n,{modelValue:a.name,"onUpdate:modelValue":_=>a.name=_,label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{modelValue:a.description,"onUpdate:modelValue":_=>a.description=_,label:"Description"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ue,[l(n,{modelValue:a.quantity,"onUpdate:modelValue":_=>a.quantity=_,label:"Quantity",type:"number",class:"product-input-field-size"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{modelValue:a.price,"onUpdate:modelValue":_=>a.price=_,label:"Price",type:"number",class:"product-input-field-size"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{"model-value":e(Q)(a.quantity,a.price),label:"Total",class:"product-input-field-size"},null,8,["model-value"])])]),s("div",ke,[l(h,{size:"small",color:"error",variant:"text","prepend-icon":"mdi-delete-outline",onClick:_=>O(H)},{default:o(()=>[V(" Remove ")]),_:2},1032,["onClick"])])]),_:2},1024),l(P)],64))),128))]),_:1}),s("div",Ce,[s("div",Ne,[s("div",De,[l(n,{modelValue:e(x),"onUpdate:modelValue":t[16]||(t[16]=a=>N(x)?x.value=a:null),density:"compact",label:"Discount",type:"number"},null,8,["modelValue"]),l(n,{modelValue:e(g),"onUpdate:modelValue":t[17]||(t[17]=a=>N(g)?g.value=a:null),density:"compact",label:"Tax",type:"number"},null,8,["modelValue"])]),s("p",Te,[Pe,s("span",null,"$"+v(e(I)),1)]),s("p",Ee,[qe,s("span",Ae,"-$"+v(e(x)),1)]),s("p",Ie,[$e,s("span",null,"$"+v(e(g)),1)]),s("p",je,[Be,s("span",null,"$"+v(e(I)+e(g)-e(x)),1)])])])]),_:1}),l(P),l(te,null,{default:o(()=>[l(ae),l(h,{color:"secondary"},{default:o(()=>[V(" Save as Draft ")]),_:1}),l(h,{color:"success"},{default:o(()=>[V(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})):(w(),T(r,{key:1,cols:"12"},{default:o(()=>[ze]),_:1}))]}),_:1})):W("",!0)}}};export{Ye as default};
