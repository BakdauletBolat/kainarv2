import{ax as y,c as l,dG as f,ay as z,aK as H,aA as J,aS as Q,aC as U,aD as X,b as Y}from"./index-5cc15e35.js";import{m as Z,u as _}from"./filter-14cd16c3.js";import{f as $,g as ee,h as te,m as ae,e as re,j as se,k as oe,p as ne,l as ue,n as le,o as me,q as ie,r as ce,s as de,t as ge,v as pe}from"./options-2c517f2f.js";const Pe=y({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function ve(e,a){const t=e.returnObject?a:f(a,e.itemValue),r=f(a,e.itemSelectable,!0);return{type:"item",value:t,selectable:r,raw:a}}function Ie(e,a){const t=[];for(const r of a)t.push(ve(e,r));return t}function fe(e){return{items:l(()=>Ie(e,e.items))}}const ye=y({search:String,loading:Boolean,...z(),...Pe(),...$(),...ee(),...te({itemsPerPage:5}),...ae(),...re(),...Z(),...H()},"VDataIterator"),be=J()({name:"VDataIterator",props:ye(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0},setup(e,a){let{slots:t}=a;const r=Q(e,"groupBy"),c=U(e,"search"),{items:d}=fe(e),{filteredItems:S}=_(e,d,c,{transform:u=>u.raw}),{sortBy:s,multiSort:D,mustSort:x}=se(e),{page:o,itemsPerPage:n}=oe(e),{toggleSort:b}=ne({sortBy:s,multiSort:D,mustSort:x,page:o}),{sortByWithGroups:h,opened:k,extractRows:B,isGroupOpen:V,toggleGroup:G}=ue({groupBy:r,sortBy:s}),{sortedItems:F}=le(e,S,h),{flatItems:g}=me(F,r,k),T=l(()=>g.value.length),{startIndex:A,stopIndex:C,pageCount:E,prevPage:O,nextPage:j,setItemsPerPage:w,setPage:R}=ie({page:o,itemsPerPage:n,itemsLength:T}),{paginatedItems:m}=ce({items:g,startIndex:A,stopIndex:C,itemsPerPage:n}),p=l(()=>B(m.value)),{isSelected:W,select:q,selectAll:K,toggleSelect:L}=de(e,{allItems:d,currentPage:p}),{isExpanded:M,toggleExpand:N}=ge(e);pe({page:o,itemsPerPage:n,sortBy:s,groupBy:r,search:c});const i=l(()=>({page:o.value,itemsPerPage:n.value,sortBy:s.value,pageCount:E.value,toggleSort:b,prevPage:O,nextPage:j,setPage:R,setItemsPerPage:w,isSelected:W,select:q,selectAll:K,toggleSelect:L,isExpanded:M,toggleExpand:N,isGroupOpen:V,toggleGroup:G,items:p.value,groupedItems:m.value}));return X(()=>Y(e.tag,{class:["v-data-iterator",e.class],style:e.style},{default:()=>{var u,P,v,I;return[(u=t.header)==null?void 0:u.call(t,i.value),m.value.length?(v=t.default)==null?void 0:v.call(t,i.value):(P=t["no-data"])==null?void 0:P.call(t),(I=t.footer)==null?void 0:I.call(t,i.value)]}})),{}}});export{be as V};
